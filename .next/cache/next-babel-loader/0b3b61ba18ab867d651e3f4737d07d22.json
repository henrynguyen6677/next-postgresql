{"ast":null,"code":"// const mysql = require('serverless-mysql')\n// const db = mysql({\n//   config: {\n//     host: process.env.MYSQL_HOST,\n//     database: process.env.MYSQL_DATABASE,\n//     user: process.env.MYSQL_USER,\n//     password: process.env.MYSQL_PASSWORD,\n//   },\n// })\nconst client = new ServerlessClient({\n  user: process.env.DB_USER,\n  host: process.env.DB_HOST,\n  database: process.env.DB_NAME,\n  password: process.env.DB_PASSWORD // port: process.env.DB_PORT\n\n});\n\nconst psql = require('serverless-postgres');\n\nconst db = psql({\n  config: {\n    host: process.env.DB_HOST,\n    database: process.env.DB_NAME,\n    user: process.env.DB_USER,\n    password: process.env.DB_PASSWORD\n  }\n});\n\nexports.query = async query => {\n  try {\n    const results = await db.query(query);\n    await db.end();\n    return results;\n  } catch (error) {\n    return {\n      error\n    };\n  }\n};","map":{"version":3,"sources":["/home/hnd/ws/learn/amplify/nextjs/next-mysql/lib/db.js"],"names":["client","ServerlessClient","user","process","env","DB_USER","host","DB_HOST","database","DB_NAME","password","DB_PASSWORD","psql","require","db","config","exports","query","results","end","error"],"mappings":"AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAMA,MAAM,GAAG,IAAIC,gBAAJ,CAAqB;AAChCC,EAAAA,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,OADc;AAEhCC,EAAAA,IAAI,EAAEH,OAAO,CAACC,GAAR,CAAYG,OAFc;AAGhCC,EAAAA,QAAQ,EAAEL,OAAO,CAACC,GAAR,CAAYK,OAHU;AAIhCC,EAAAA,QAAQ,EAAEP,OAAO,CAACC,GAAR,CAAYO,WAJU,CAKhC;;AALgC,CAArB,CAAf;;AAQA,MAAMC,IAAI,GAAGC,OAAO,CAAC,qBAAD,CAApB;;AAEA,MAAMC,EAAE,GAAGF,IAAI,CAAC;AACdG,EAAAA,MAAM,EAAE;AACNT,IAAAA,IAAI,EAAEH,OAAO,CAACC,GAAR,CAAYG,OADZ;AAENC,IAAAA,QAAQ,EAAEL,OAAO,CAACC,GAAR,CAAYK,OAFhB;AAGNP,IAAAA,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,OAHZ;AAINK,IAAAA,QAAQ,EAAEP,OAAO,CAACC,GAAR,CAAYO;AAJhB;AADM,CAAD,CAAf;;AASAK,OAAO,CAACC,KAAR,GAAgB,MAAOA,KAAP,IAAiB;AAC/B,MAAI;AACF,UAAMC,OAAO,GAAG,MAAMJ,EAAE,CAACG,KAAH,CAASA,KAAT,CAAtB;AACA,UAAMH,EAAE,CAACK,GAAH,EAAN;AACA,WAAOD,OAAP;AACD,GAJD,CAIE,OAAOE,KAAP,EAAc;AACd,WAAO;AAAEA,MAAAA;AAAF,KAAP;AACD;AACF,CARD","sourcesContent":["// const mysql = require('serverless-mysql')\n\n// const db = mysql({\n//   config: {\n//     host: process.env.MYSQL_HOST,\n//     database: process.env.MYSQL_DATABASE,\n//     user: process.env.MYSQL_USER,\n//     password: process.env.MYSQL_PASSWORD,\n//   },\n// })\n\nconst client = new ServerlessClient({\n    user: process.env.DB_USER,\n    host: process.env.DB_HOST,\n    database: process.env.DB_NAME,\n    password: process.env.DB_PASSWORD,\n    // port: process.env.DB_PORT\n});\n\nconst psql = require('serverless-postgres')\n\nconst db = psql({\n  config: {\n    host: process.env.DB_HOST,\n    database: process.env.DB_NAME,\n    user: process.env.DB_USER,\n    password: process.env.DB_PASSWORD,\n  },\n})\n\nexports.query = async (query) => {\n  try {\n    const results = await db.query(query)\n    await db.end()\n    return results\n  } catch (error) {\n    return { error }\n  }\n}\n"]},"metadata":{},"sourceType":"script"}