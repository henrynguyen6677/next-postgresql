{"ast":null,"code":"import ServerlessClient from 'serverless-postgres';\n\nconst query = async query => {\n  try {\n    console.log(\"Begin connection\");\n    console.log({\n      query\n    });\n    const db = new ServerlessClient({\n      host: process.env.DB_HOST,\n      database: process.env.DB_NAME,\n      user: process.env.DB_USER,\n      password: process.env.DB_PASSWORD\n    });\n    await db.sconnect();\n    const results = await db.query(query);\n    await db.end();\n    return results;\n  } catch (error) {\n    return {\n      error\n    };\n  }\n};\n\nexport { query };","map":{"version":3,"sources":["/home/hnd/ws/learn/amplify/nextjs/next-mysql/lib/db.js"],"names":["ServerlessClient","query","console","log","db","host","process","env","DB_HOST","database","DB_NAME","user","DB_USER","password","DB_PASSWORD","sconnect","results","end","error"],"mappings":"AAAA,OAAOA,gBAAP,MAA6B,qBAA7B;;AAEA,MAAMC,KAAK,GAAG,MAAOA,KAAP,IAAiB;AAC7B,MAAI;AACFC,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY;AAACF,MAAAA;AAAD,KAAZ;AACA,UAAMG,EAAE,GAAG,IAAIJ,gBAAJ,CAAqB;AAC5BK,MAAAA,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,OADU;AAE5BC,MAAAA,QAAQ,EAAEH,OAAO,CAACC,GAAR,CAAYG,OAFM;AAG5BC,MAAAA,IAAI,EAAEL,OAAO,CAACC,GAAR,CAAYK,OAHU;AAI5BC,MAAAA,QAAQ,EAAEP,OAAO,CAACC,GAAR,CAAYO;AAJM,KAArB,CAAX;AAMA,UAAMV,EAAE,CAACW,QAAH,EAAN;AACA,UAAMC,OAAO,GAAG,MAAMZ,EAAE,CAACH,KAAH,CAASA,KAAT,CAAtB;AACA,UAAMG,EAAE,CAACa,GAAH,EAAN;AACA,WAAOD,OAAP;AACD,GAbD,CAaE,OAAOE,KAAP,EAAc;AACd,WAAO;AAAEA,MAAAA;AAAF,KAAP;AACD;AACF,CAjBD;;AAmBA,SAASjB,KAAT","sourcesContent":["import ServerlessClient from 'serverless-postgres'\n\nconst query = async (query) => {\n  try {\n    console.log(\"Begin connection\");\n    console.log({query})\n    const db = new ServerlessClient({\n        host: process.env.DB_HOST,\n        database: process.env.DB_NAME,\n        user: process.env.DB_USER,\n        password: process.env.DB_PASSWORD,\n    })\n    await db.sconnect();\n    const results = await db.query(query)\n    await db.end()\n    return results\n  } catch (error) {\n    return { error }\n  }\n}\n\nexport { query }"]},"metadata":{},"sourceType":"module"}